/*!
 * Copyright 2024 Adobe. All rights reserved.
 *
 * This file is licensed to you under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License. You may obtain a copy
 * of the License at <http://www.apache.org/licenses/LICENSE-2.0>
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 * OF ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */

@import "./themes/spectrum-two.css";

.spectrum-Stepper {
	/*** MODS for sub components ***/
	/* --mod-infield-button-border-color: transparent; */
	--mod-infield-button-border-color: transparent transparent hotpink hotpink;
	--mod-infield-button-border-color-hover: transparent;

	--mod-textfield-border-color: transparent;
	--mod-textfield-border-color-hover: transparent;
	--mod-textfield-border-color-focus: transparent;
	--mod-textfield-border-color-focus-hover: transparent;
	--mod-textfield-border-color-keyboard-focus: transparent;

	--mod-textfield-border-color-invalid-default: transparent;
	--mod-textfield-border-color-invalid-focus: transparent;
	--mod-textfield-border-color-invalid-hover: transparent;
	--mod-textfield-border-color-invalid-focus-hover: transparent;
	--mod-textfield-border-color-invalid-keyboard-focus: transparent;
	--mod-textfield-border-color-disabled: transparent;

	--mod-textfield-focus-indicator-color: transparent;

	--spectrum-stepper-width: calc(var(--mod-stepper-height, var(--spectrum-stepper-height)) * var(--mod-stepper-min-width-multiplier, var(--spectrum-stepper-min-width-multiplier)) + var(--mod-stepper-button-width, var(--spectrum-stepper-button-width)) + (var(--mod-stepper-border-width, var(--spectrum-stepper-border-width)) * 2));

	position: relative;
	display: inline-flex;
	flex-flow: row nowrap;

	inline-size: var(--mod-stepper-width, var(--spectrum-stepper-width));
	block-size: var(--mod-stepper-height, var(--spectrum-stepper-height));

	border-radius: var(--mod-stepper-border-radius, var(--spectrum-stepper-border-radius));
	border-color: var(--highcontrast-stepper-border-color, var(--mod-stepper-border-color, var(--spectrum-stepper-border-color)));
	border-width: var(--mod-stepper-border-width, var(--spectrum-stepper-border-width));
	border-style: solid;

	background-color: var(--highcontrast-stepper-background-color, var(--mod-stepper-background-color, var(--spectrum-stepper-background-color)));

	&::before {
		content: "";
	}

	&::after {
		content: "";
		position: absolute;
		inset-block-end: calc(-1 * (var(--mod-stepper-focus-indicator-gap, var(--spectrum-stepper-focus-indicator-gap)) + var(--mod-stepper-focus-indicator-width, var(--spectrum-stepper-focus-indicator-width)) + var(--mod-stepper-border-width, var(--spectrum-stepper-border-width))));
		inset-inline-start: 0;
		inline-size: 100%;
		block-size: var(--mod-stepper-focus-indicator-width, var(--spectrum-stepper-focus-indicator-width));
	}

	/* container for stepUp and stepDown buttons */
	.spectrum-Stepper-buttons {
		display: flex;
		flex-direction: column;
		justify-content: center;
		box-sizing: border-box;

		block-size: var(--mod-stepper-height, var(--spectrum-stepper-height));
		inline-size: var(--mod-stepper-button-width, var(--spectrum-stepper-button-width));
	}

	&:not(.spectrum-Stepper--quiet) {
		.spectrum-Stepper-button:first-child {
			--mod-infield-button-border-color: transparent transparent var(--highcontrast-stepper-border-color, var(--mod-stepper-border-color, var(--spectrum-stepper-border-color))) var(--highcontrast-stepper-border-color, var(--mod-stepper-border-color, var(--spectrum-stepper-border-color)));
			--mod-infield-button-border-width: 0 0 var(--mod-stepper-border-width, var(--spectrum-stepper-border-width)) var(--mod-stepper-border-width, var(--spectrum-stepper-border-width));
			--mod-infield-button-stacked-fill-padding-inner: 0px;
		}

		.spectrum-Stepper-button:last-child {
			--mod-infield-button-border-color: var(--highcontrast-stepper-border-color, var(--mod-stepper-border-color, var(--spectrum-stepper-border-color))) transparent transparent var(--highcontrast-stepper-border-color, var(--mod-stepper-border-color, var(--spectrum-stepper-border-color)));
			--mod-infield-button-border-width: var(--mod-stepper-border-width, var(--spectrum-stepper-border-width)) 0 0 var(--mod-stepper-border-width, var(--spectrum-stepper-border-width));
			--mod-infield-button-stacked-bottom-border-block-end-width: 0;
		}
	}

	/*** Hover ***/
	&:hover:not(.is-disabled) {
		--mod-stepper-border-color: var(--highcontrast-stepper-border-color-hover, var(--mod-stepper-border-color-hover, var(--spectrum-stepper-border-color-hover)));
	}

	/*** Focused ***/
	&.is-focused:not(.is-disabled),
	&:focus:not(.is-disabled) {
		--mod-stepper-border-color: var(--highcontrast-stepper-border-color-focus, var(--mod-stepper-border-color-focus, var(--spectrum-stepper-border-color-focus)));

		&:hover {
			--mod-stepper-border-color: var(--highcontrast-stepper-border-color-focus-hover, var(--mod-stepper-border-color-focus-hover));
		}
	}

	/*** Keyboard Focused ***/
	&.is-keyboardFocused:not(.is-disabled),
	&:focus-visible:not(.is-disabled) {
		--mod-stepper-border-color: var(--highcontrast-stepper-border-color-keyboard-focus, var(--mod-stepper-border-color-keyboard-focus, var(--spectrum-stepper-border-color-keyboard-focus)));

		/* keyboard focus indicator is visible */
		outline: var(--mod-stepper-focus-indicator-width, var(--spectrum-stepper-focus-indicator-width)) solid;
		outline-color: var(--highcontrast-stepper-focus-indicator-color, var(--mod-stepper-focus-indicator-color, var(--spectrum-stepper-focus-indicator-color)));
		outline-offset: var(--mod-stepper-focus-indicator-gap, var(--spectrum-stepper-focus-indicator-gap));
	}

	/*** Invalid ***/
	&.is-invalid {
		--spectrum-stepper-border-color: var(--mod-stepper-border-color-invalid, var(--spectrum-stepper-border-color-invalid));
		--spectrum-stepper-border-color-hover: var(--mod-stepper-border-color-hover-invalid, var(--spectrum-stepper-border-color-hover-invalid));
		--spectrum-stepper-border-color-keyboard-focus: var(--mod-stepper-border-color-keyboard-focus-invalid, var(--spectrum-stepper-border-color-keyboard-focus-invalid));

		--mod-textfield-icon-spacing-inline-start-invalid: 0;
	}

	/*** Disabled ***/
	&.is-disabled {
		--mod-stepper-border-color: var(--spectrum-stepper-border-color-disabled);
		--mod-stepper-border-color-hover: var(--spectrum-stepper-border-color-disabled);
		--mod-stepper-border-color-focus: var(--spectrum-stepper-border-color-disabled);
		--mod-stepper-border-color-focus-hover: var(--spectrum-stepper-border-color-disabled);
		--mod-stepper-border-color-keyboard-focus: var(--spectrum-stepper-border-color-disabled);

		--mod-stepper-background-color: var(--spectrum-stepper-background-color-disabled);
	}

	/*** Quiet ***/
	&.spectrum-Stepper--quiet {
		--mod-stepper-border-radius: var(--spectrum-stepper-border-radius-quiet);
		--mod-stepper-background-color: var(--spectrum-stepper-background-color-quiet);

		--mod-infield-button-border-color-quiet: transparent;
		--mod-infield-button-border-color-quiet-disabled: transparent;

		--mod-infield-button-border-color: transparent;
		--mod-infield-button-width-stacked: var(--mod-stepper-button-width-quiet, var(--spectrum-stepper-button-width));
		--mod-infield-button-border-block-end-width: var(--mod-stepper-border-width, var(--spectrum-stepper-border-width));
		--mod-infield-button-stacked-bottom-border-block-end-width: var(--mod-stepper-border-width, var(--spectrum-stepper-border-width));

		--mod-infield-button-fill-justify-content: flex-end;
		--mod-infield-button-fill-padding: 0;

		/* Override the default border indicators leaving only the bottom border */
		border-inline-color: transparent;
		border-block-start-color: transparent;

		/* Remove the angled right/left indicators */
		border-inline-width: 0;
		border-radius: 0;

		&.is-keyboardFocused:not(.is-disabled),
		&:focus-visible:not(.is-disabled) {
			outline-width: 0;

			&::after {
				background-color: var(--highcontrast-stepper-focus-indicator-color, var(--mod-stepper-focus-indicator-color, var(--spectrum-stepper-focus-indicator-color)));
			}
		}
	}
}

@media (forced-colors: active) {
	.spectrum-Stepper {
		--highcontrast-stepper-border-color: CanvasText;
		--highcontrast-stepper-border-color-hover: Highlight;
		--highcontrast-stepper-border-color-focus: Highlight;
		--highcontrast-stepper-border-color-focus-hover: Highlight;
		--highcontrast-stepper-border-color-keyboard-focus: CanvasText;
		--highcontrast-stepper-focus-indicator-color: Highlight;

		&.is-invalid {
			--highcontrast-stepper-border-color: Highlight;
			--highcontrast-stepper-border-color-hover: Highlight;
			--highcontrast-stepper-border-color-focus: Highlight;
			--highcontrast-stepper-border-color-focus-hover: Highlight;
			--highcontrast-stepper-border-color-keyboard-focus: Highlight;
			--highcontrast-infield-button-border-color: Highlight;
		}

		&.is-disabled {
			--highcontrast-stepper-border-color: GrayText;
			--highcontrast-stepper-border-width: var(--mod-stepper-border-width, var(--spectrum-stepper-border-width));
			--highcontrast-infield-button-border-color: GrayText;
		}
	}
}
